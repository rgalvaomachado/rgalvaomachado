name: Gerador de Cards de Estatísticas Profissionais

on:
  schedule:
    - cron: '0 0 * * *' 
  workflow_dispatch:
    
jobs:
  # 1. CARD: Total de Commits
  commits:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Gerar Card de Commits
        uses: lowlighter/metrics@latest 
        with:
          token: ${{ secrets.GH_TOKEN_PROFISSIONAL }}
          user: romulosuperlogica
          output_dir: .
          filename: commits.svg 
          
          # Configuração: Apenas um contador (commits)
          template: classic 
          config_timezone: America/Sao_Paulo
          base: "" 
          plugin_activity: yes 
          plugin_activity_limit: 1000 
          plugin_activity_days: 365
          plugin_activity_filter: all
          plugin_activity_visibility: all
          
  # 2. CARD: Pull Requests Abertos
  prs_opened:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Gerar Card de PRs Abertos
        uses: lowlighter/metrics@latest 
        with:
          token: ${{ secrets.GH_TOKEN_PROFISSIONAL }}
          user: romulosuperlogica
          output_dir: .
          filename: prs_opened.svg 
          
          # Configuração: Apenas um contador (PRs abertos)
          template: classic 
          config_timezone: America/Sao_Paulo
          base: "" 
          plugin_activity: yes 
          plugin_activity_days: 365
          plugin_activity_filter: prs
          plugin_activity_visibility: all
          
  # 3. CARD: Pull Requests Revisados
  prs_reviewed:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Gerar Card de PRs Revisados
        uses: lowlighter/metrics@latest 
        with:
          token: ${{ secrets.GH_TOKEN_PROFISSIONAL }}
          user: romulosuperlogica
          output_dir: .
          filename: prs_reviewed.svg 
          
          # Configuração: Apenas um contador (PRs revisados)
          template: classic 
          config_timezone: America/Sao_Paulo
          base: "" 
          plugin_activity: yes 
          plugin_activity_days: 365
          plugin_activity_filter: reviews
          plugin_activity_visibility: all
