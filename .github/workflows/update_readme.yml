name: Gerador de Cards de Estatísticas Profissionais (Números Puros)

on:
  schedule:
    - cron: '0 0 * * *' 
  workflow_dispatch:
    
jobs:
  # 1. CARD: Total de Commits (APENAS O NÚMERO)
  commits:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Gerar Numero de Commits
        uses: lowlighter/metrics@latest 
        with:
          token: ${{ secrets.GH_TOKEN_PROFISSIONAL }}
          user: romulosuperlogica
          output_dir: .
          filename: num_commits.svg 
          
          # Configuração: Card Minimalista
          template: classic 
          config_timezone: America/Sao_Paulo
          base: activity 
          base_activity_owner: yes
          
          # HACK CSS Extremo: Esconde tudo, deixando apenas o número.
          extras_css: |
            /* Esconde TODOS os elementos que não são o valor do dado */
            .header, .metadata, .details, .text { display: none !important; }
            .data svg, .data .label { display: none !important; }
            
            /* Remove o fundo e bordas do SVG */
            svg { background: none !important; border: none !important; overflow: visible !important; }
            .background { display: none !important; }

            /* Estiliza APENAS O NÚMERO */
            .data { font-size: 38px !important; } 
            .data text { font-weight: 900; fill: #ff3885 !important; }

  # 2. CARD: Pull Requests Abertos (APENAS O NÚMERO)
  prs_opened:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Gerar Numero de PRs Abertos
        uses: lowlighter/metrics@latest 
        with:
          token: ${{ secrets.GH_TOKEN_PROFISSIONAL }}
          user: romulosuperlogica
          output_dir: .
          filename: num_prs_opened.svg 
          
          # Configuração: Card Minimalista
          template: classic 
          config_timezone: America/Sao_Paulo
          base: activity 
          base_activity_owner: yes

          # HACK CSS Extremo
          extras_css: |
            .header, .metadata, .details, .text { display: none !important; }
            .data svg, .data .label { display: none !important; }
            svg { background: none !important; border: none !important; overflow: visible !important; }
            .background { display: none !important; }
            .data { font-size: 38px !important; }
            .data text { font-weight: 900; fill: #ff3885 !important; }

  # 3. CARD: Pull Requests Revisados (APENAS O NÚMERO)
  prs_reviewed:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Gerar Numero de PRs Revisados
        uses: lowlighter/metrics@latest 
        with:
          token: ${{ secrets.GH_TOKEN_PROFISSIONAL }}
          user: romulosuperlogica
          output_dir: .
          filename: num_prs_reviewed.svg 
          
          # Configuração: Card Minimalista
          template: classic 
          config_timezone: America/Sao_Paulo
          base: activity 
          base_activity_owner: yes

          # HACK CSS Extremo
          extras_css: |
            .header, .metadata, .details, .text { display: none !important; }
            .data svg, .data .label { display: none !important; }
            svg { background: none !important; border: none !important; overflow: visible !important; }
            .background { display: none !important; }
            .data { font-size: 38px !important; }
            .data text { font-weight: 900; fill: #ff3885 !important; }
